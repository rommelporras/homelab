# v0.1.0 â€” Foundation

> **Release:** v0.1.0
> **Phase:** 1
> **Goal:** Ubuntu 24.04 installed on all nodes with SSH access

---

## Overview

This release establishes the hardware foundation:
- 3x Lenovo M80q machines with Ubuntu Server 24.04 LTS
- Static IP configuration on VLAN 30
- SSH access configured for automation

---

## Prerequisites

- 3x Lenovo M80q (i5-10400T, 16GB RAM, 512GB NVMe)
- Ubuntu Server 24.04.3 LTS ISO
- Network switch with VLAN 30 configured
- DNS records for k8s-cp{1,2,3}.home.rommelporras.com

---

## Step 1: Install Ubuntu Server

Install Ubuntu Server 24.04.3 LTS on each M80q:

1. Boot from USB with Ubuntu Server ISO
2. Select "Ubuntu Server (minimized)" installation
3. Configure network:
   - **k8s-cp1:** 10.10.30.11/24, gateway 10.10.30.1
   - **k8s-cp2:** 10.10.30.12/24, gateway 10.10.30.1
   - **k8s-cp3:** 10.10.30.13/24, gateway 10.10.30.1
4. Set hostname during install (k8s-cp1, k8s-cp2, k8s-cp3)
5. Create user: `wawashi`
6. Enable OpenSSH server
7. Skip additional snaps

---

## Step 2: Post-Installation Configuration

SSH to each node and run:

```bash
# Update system
sudo apt update && sudo apt upgrade -y

# Verify hostname (should already be set)
hostnamectl

# Verify static IP
ip addr show | grep "10.10.30"
```

### Configure Static IP (if not done during install)

If DHCP was used during install, configure static IP:

```bash
# Edit netplan config
sudo nano /etc/netplan/00-installer-config.yaml
```

Example for k8s-cp1:

```yaml
network:
  version: 2
  ethernets:
    eno1:
      addresses:
        - 10.10.30.11/24
      routes:
        - to: default
          via: 10.10.30.1
      nameservers:
        addresses:
          - 10.10.30.53
          - 10.10.30.54
```

Apply changes:

```bash
sudo netplan apply
```

---

## Step 3: Configure SSH Keys

From your workstation, copy SSH key to all nodes:

```bash
# Generate key if needed
ssh-keygen -t ed25519 -C "homelab"

# Copy to all nodes
ssh-copy-id wawashi@k8s-cp1.home.rommelporras.com
ssh-copy-id wawashi@k8s-cp2.home.rommelporras.com
ssh-copy-id wawashi@k8s-cp3.home.rommelporras.com
```

---

## Step 4: Basic Security Hardening

On each node:

```bash
# Disable password authentication (SSH keys only)
sudo sed -i 's/#PasswordAuthentication yes/PasswordAuthentication no/' /etc/ssh/sshd_config
sudo systemctl restart sshd

# Enable automatic security updates
sudo apt install -y unattended-upgrades
sudo dpkg-reconfigure -plow unattended-upgrades
```

---

## Verification

```bash
# From workstation, verify SSH access to all nodes
for node in k8s-cp1 k8s-cp2 k8s-cp3; do
    echo "=== $node ==="
    ssh wawashi@$node.home.rommelporras.com "hostname && ip a | grep 10.10.30 && uname -r"
done
```

Expected output:
```
=== k8s-cp1 ===
k8s-cp1
    inet 10.10.30.11/24 ...
6.8.0-xx-generic

=== k8s-cp2 ===
k8s-cp2
    inet 10.10.30.12/24 ...
6.8.0-xx-generic

=== k8s-cp3 ===
k8s-cp3
    inet 10.10.30.13/24 ...
6.8.0-xx-generic
```

---

## Checklist

- [ ] Ubuntu 24.04.3 LTS installed on k8s-cp1
- [ ] Ubuntu 24.04.3 LTS installed on k8s-cp2
- [ ] Ubuntu 24.04.3 LTS installed on k8s-cp3
- [ ] Static IPs configured (.11, .12, .13)
- [ ] SSH key authentication working
- [ ] Password authentication disabled

---

## Next Steps

Proceed to [v0.2.0-bootstrap.md](v0.2.0-bootstrap.md) to initialize the Kubernetes cluster.
